<div class="page-center">
    <div class="page-center-in">
        <div class="container-fluid">
            <form [formGroup]="scheduleform" (ngSubmit)="submitSchedule()" *ngIf="scheduleJS">
                <section class="card">
                    <div class="card-block">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <select formControlName="schedule" [(ngModel)]="scheduleJS.id" class="select2-arrow form-control" (change)="selectSchedule($event)">
                                             <option *ngFor="let schedule of _scheduleStore.schedules | async" [value]="schedule.id">{{schedule.name}}</option>                                       
                                    </select>
                                </div>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group" [class.error]="scheduleformControls.name.touched && !scheduleformControls.name.valid">
                                    <label class="form-label"> Schedule Name
                                        <span class="color-red">*</span>
                                    </label>
                                    <input [(ngModel)]="scheduleJS.name" formControlName="name" type="text" class="form-control" placeholder="" [class.error]="!scheduleformControls.name.valid">
                                    <div class='error-list' *ngIf="scheduleformControls.name.touched && !scheduleformControls.name.valid">
                                        <ul>
                                            <li *ngIf="scheduleformControls.name.hasError('required')">Name is required.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        
                            <div class="col-lg-6">
                                <div class="checkbox m-t-lg">
                                    <input type="checkbox" formControlName="addAsNew" value="1" id="addAsNew">
                                    <label class="form-label" for="addAsNew">  Add As New
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div formArrayName="scheduleDetails">
                            <div class="row form-group" [formGroupName]="i" *ngFor="let scheduleDetail of scheduleform.controls.scheduleDetails.controls; let i=index">
                                <div>
                                    <div class="col-lg-2">
                                        <label class="form-label"> {{scheduleDetailJS[i].dayofWeekString}}</label>
                                    </div>
                                    <div class="col-lg-3">
                                        <input type="hidden" [ngModel]="scheduleDetailJS[i].dayofWeek" formControlName="dayofWeek">
                                        <input type="hidden" [ngModel]="scheduleDetailJS[i].id" formControlName="scheduleDetailId">
                                        <select formControlName="scheduleStatus" [(ngModel)]="scheduleDetailJS[i].scheduleStatus" class="select2-arrow form-control">
                                             <option value="1">Specific Hours</option>
                                             <option value="0">Closed</option>                                             
                                        </select>
                                    </div>
                                    <div class="col-lg-3" *ngIf="scheduleDetailJS[i].scheduleStatus == 1">
                                        <div class='input-group date'>

                                            <p-calendar formControlName="slotStart" [ngModel]="scheduleDetailJS[i].slotStart" [timeOnly]="true" [showIcon]="true" icon="fa fa-clock-o">
                                            </p-calendar>
                                        </div>
                                    </div>
                                    <div class="col-lg-1 text-center" *ngIf="scheduleDetailJS[i].scheduleStatus == 1">
                                        <label class="form-label"> To</label>
                                    </div>
                                    <div class="col-lg-3" *ngIf="scheduleDetailJS[i].scheduleStatus == 1">
                                        <div class='input-group date'>

                                            <p-calendar formControlName="slotEnd" [ngModel]="scheduleDetailJS[i].slotEnd" [timeOnly]="true" [showIcon]="true" icon="fa fa-clock-o">
                                            </p-calendar>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>


                    </div>
                </section>
                <div class="text-center">
                    <button [disabled]="!scheduleform.valid || isSaveProgress" type="submit" class="btn btn-success sign-up">Save
                    <loader [visible]="isSaveProgress"></loader>
                </button>
                </div>
            </form>
        </div>
    </div>
</div>