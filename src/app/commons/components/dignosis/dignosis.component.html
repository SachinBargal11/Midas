<p-confirmDialog width="425"></p-confirmDialog>
<br>
<div class="col-lg-12">
<div *ngIf="showAllDiagnosisCode">
    <h3 class="with-border">Diagnosis Codes</h3>
    <div class="ui-widget-header row">
        <div class="col-lg-6 input-group">
          <span class="input-group-addon"><i class="fa fa-search"></i></span>
          <input #gb1 type="text" class="form-control" style="float:left" placeholder="Search ">
        </div>
        <div class="col-lg-6">
         <a class="pull-right btn btn-info btn-sm" (click)="showCPreffredDiagnosisCodes()">
          <i class="fa fa-check fa-1x"></i><span class="hidden-md-down"> View Preferred Diagnosis Code</span>
         </a>
        </div>
    </div>
   <!-- <p-listbox [options]="diagnosisCodesArr" [(ngModel)]="selectedDiagnosisCodes" multiple="multiple" styleClass="list-control" checkbox="checkbox"
      filter="filter" [listStyle]="{'max-height':'250px'}">
    <ng-template let-diagnosisCodes pTemplate="item">
        {{diagnosisCodes.label}}
    </ng-template>
    </p-listbox>-->
    <p-dataTable [value]="diagnosisCodesArr" [(selection)]="selectedDiagnosisCodes" [rows]="7" [paginator]="true" [globalFilter]="gb1" [responsive]="true" #dt1>
        <header>Diagnosis Codes</header>
        <p-headerColumnGroup>
          <p-row>
            <p-column [style]="{'width':'38px'}"></p-column>
            <p-column header="Diagnosis Code"></p-column>
            <p-column header="Description"></p-column>
          </p-row>
        </p-headerColumnGroup>
        <p-column selectionMode="multiple"></p-column>
        <p-column field="diagnosisCodeText"></p-column>
        <p-column field="diagnosisCodeDesc"></p-column>
      </p-dataTable>
      <br>
  </div>
  <div *ngIf="showPreDiagnosisCode">
      <h3 class="with-border">Preffered Diagnosis Codes</h3>
      <div class="ui-widget-header row">
          <div class="col-lg-4 input-group">
            <span class="input-group-addon"><i class="fa fa-search"></i></span>
            <input #gb2 type="text" class="form-control" style="float:left" placeholder="Search ">
          </div>
          <div class="col-lg-4">
           <select [(ngModel)]="selectedMode"  class="select-list form-control" (change)="selectOption($event)">
            <option value="0">-Select Diagnosis Type-</option>
            <option *ngFor="let diagnosisType of diagnosisTypes" value="{{diagnosisType.id}}">{{diagnosisType.diagnosisTypeText}}</option>
           </select>
         </div>
         <div class="col-lg-4">
          <a class="pull-right btn btn-info btn-sm" (click)="showCAllDiagnosisCodes()">
          <i class="fa fa-check fa-1x"></i><span class="hidden-md-down"> View All Diagnosis Code</span>
          </a>
         </div>
      </div>
    <!--<p-listbox [options]="diagnosisCodesCompArr" [(ngModel)]="selectedDiagnosisCodes" multiple="multiple" styleClass="list-control" checkbox="checkbox"
      filter="filter" [listStyle]="{'max-height':'250px'}">
    <ng-template let-diagnosisCodes pTemplate="item">
        {{diagnosisCodes.label}}
    </ng-template>
    </p-listbox>-->
    <p-dataTable [value]="diagnosisCodesCompArr" [(selection)]="selectedDiagnosisCodes" [rows]="7" [paginator]="true" [globalFilter]="gb2" [responsive]="true" #dt2>
        <header>Preffered Diagnosis Codes</header>
        <p-headerColumnGroup>
          <p-row>
            <p-column [style]="{'width':'38px'}"></p-column>
            <p-column header="Diagnosis Code"></p-column>
            <p-column header="Description"></p-column>
          </p-row>
        </p-headerColumnGroup>
        <p-column selectionMode="multiple"></p-column>
        <p-column field="diagnosisCodeText"></p-column>
        <p-column field="diagnosisCodeDesc"></p-column>
      </p-dataTable>
      <br>
  </div>
</div>
<div class="col-lg-12">
  <h3 class="with-border">Selected Diagnosis</h3>
  <div class="ui-widget-header row">
    <div class="col-lg-6 input-group">
      <span class="input-group-addon"><i class="fa fa-search"></i></span>
      <input #gb type="text" class="form-control" style="float:left" placeholder="Search ">
    </div>
    <div class="col-lg-6" *ngIf="sessionStore.isOnlyDoctorRole() && selectedVisit.doctor != null">
        <a class="pull-right btn btn-danger btn-sm" (click)="deleteDiagnosis()" *ngIf="!disableSaveDelete && (sessionStore.session.user.id == selectedVisit.doctor.user.id)">
        <i class="fa fa-trash-o fa-1x"></i><span class="hidden-md-down"> Delete Diagnosis </span>
        <loader [visible]="isDeleteProgress"></loader>
      </a>
    </div>
    <div class="col-lg-6" *ngIf="!sessionStore.isOnlyDoctorRole()">        
        <a class="pull-right btn btn-danger btn-sm" (click)="deleteDiagnosis()">
          <i class="fa fa-trash-o fa-1x"></i><span class="hidden-md-down"> Delete Diagnosis </span>          
        </a>
      </div>
  </div>
  <p-dataTable [value]="selectedDiagnosisCodes" [(selection)]="selectedDiagnosis" [rows]="10" [paginator]="true" [globalFilter]="gb"
    [responsive]="true">
    <header>Diagnosis codes</header>
    <p-column selectionMode="multiple"></p-column>
    <p-column field="diagnosisCodeText" header="Diagnosis Code" [sortable]="true"></p-column>
    <p-column field="diagnosisCodeDesc" header="Description" [sortable]="true"></p-column>
  </p-dataTable>
  <br>

  <div *ngIf="sessionStore.isOnlyDoctorRole() && selectedVisit.doctor != null">
    <button class="btn btn-success sign-up" (click)="saveDiagnosisCodes()" *ngIf="!disableSaveDelete && (sessionStore.session.user.id == selectedVisit.doctor.user.id)">Save
        <loader [visible]="isSaveProgress"></loader>
    </button>
  </div>
  <div *ngIf="!sessionStore.isOnlyDoctorRole()">
    <button class="btn btn-success sign-up" (click)="saveDiagnosisCodes()">Save 
        <loader [visible]="isSaveProgress"></loader>     
    </button>
  </div>
</div>