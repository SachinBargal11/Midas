<div class="form-group">
    <div class="form-check form-check-inline">
        <label class="form-check-label">
            <!--<input type="radio" value="1" name="documentMode" [(ngModel)]="documentMode" (ngModelChange)="onMedicalProviderModelChange($event)"> Assign Preffered Medical Provider-->
            <input type="radio" value="1" name="medicalProviderMode" [(ngModel)]="medicalProviderMode"> Add Medical Provider
        </label>
    </div>
    <div class="form-check  form-check-inline">
        <label class="form-check-label">
            <input type="radio" value="2" name="medicalProviderMode" [(ngModel)]="medicalProviderMode"> Add Preferred Medical Provider
        </label>
    </div>
</div>
<section class="card" [hidden]="medicalProviderMode != '1'">
    <header class="card-header card-header-lg">
        Add Medical Provider
    </header>
    <div class="card-block">
        <!-- <div class="row">
            <div class="col-lg-4">
                <label class="form-label">Providers-List
                                <span class="color-red">*</span>
                            </label>
                <div class="form-group">
                    <select type="text" [(ngModel)]="currentProviderId" class="form-control" placeholder="" (change)="selectProviders($event)">
                            <option value="0">-Select Provider-</option>
                              <option *ngFor="let provider of allProviders" value="{{provider.id}}">{{provider.name}} </option>
                        
                 </select>
                </div>
            </div>
            <div class="col-lg-4 m-t-lg">
                <button type="submit" (click)="assignMedicalProvider()" class="btn btn-success sign-up">Assign Medical Provider To Company</button>
            </div>
        </div> -->
        <div class=" ui-widget-header row">
                <div class="col-lg-4">
                    <label class="form-label">Enter Medical Provider Token Number</label>
                </div>
                <div class="col-lg-8">
                    <form [formGroup]="addMedicalProviderByToken" (ngSubmit)="validateGeneratedToken()">
                        <div class="col-lg-4">
                            <div class="form-group" [class.error]="addMedicalProviderByTokenControls.token.touched && !addMedicalProviderByTokenControls.token.valid">
                                <input formControlName="token" type="text" class="form-control" placeholder="" [class.error]="addMedicalProviderByTokenControls.token.touched && !addMedicalProviderByTokenControls.token.valid">
                                <div class='error-list' *ngIf="addMedicalProviderByTokenControls.token.touched && !addMedicalProviderByTokenControls.token.valid">
                                    <ul>
                                        <li *ngIf="addMedicalProviderByTokenControls.token.hasError('required')">Please enter medical provider OTP.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <button class="btn btn-success sign-up" [disabled]="!addMedicalProviderByToken.valid" type="submit"><i aria-hidden="true"></i>
                          Validate Token
                        </button>
                        </div>
                    </form>
                </div>
            </div>
            <div *ngIf="validateOtpResponse" class="row" style="text-align: left;">
                <div class="col-lg-3">
                    <label class="form-label">Validated Medical Provider:                              
                                            </label>
                </div>
                <div class="col-lg-3">
                    <label class="form-label">{{medicalProviderName}}
                                        </label>
                </div>
            </div>
            <div *ngIf="validateOtpResponse" class="row" style="text-align: left;">
                <div class="col-lg-3">
                    <label class="form-label">Validated Medical Provider Address:                              
                                            </label>
                </div>
                <div class="col-lg-3">
                    <label class="form-label">{{medicalProviderAddress}}
                                        </label>
                </div>
            </div>
            <div *ngIf="validateOtpResponse" class="row ui-widget-header">
             <div class="col-lg-3">
                <a class="btn btn-primary btn-sm" (click)="associateMedicalProvider()"><i class="fa fa-plus" aria-hidden="true"></i>
              <span class="hidden-md-down">Associate Medical Provider</span>
            </a>
            </div>
            <div class="col-lg-3">
                <a class="btn btn-danger btn-sm" (click)="closeDialog()">
                    <i class="fa fa-trash-o fa-1x"></i><span class="hidden-md-down"> Dismiss Medical Provider</span>
                </a>
            </div>            
            <br/>
        </div>
        <br/>
    </div>
</section>

<section class="card" [hidden]="medicalProviderMode != '2'">
    <header class="card-header card-header-lg">
        Add Preferred Medical Provider
    </header>
    <div class="card-block">
        <form [formGroup]="providerform" name="providerform" (ngSubmit)="saveMedicalProvider()">
            <div class="row">
                <div class="col-lg-6">
                    <label class="form-label"> Company Name
                                            <span class="color-red">*</span>
                                        </label>
                    <div class="form-group" [class.error]="providerformControls.companyName.touched && !providerformControls.companyName.valid">
                        <input [ngModel]="companyName" formControlName="companyName" type="text" class="form-control" [class.error]="!providerformControls.companyName.valid"
                         (change)="CheckPreferredCompanyNameAlreadyExists()"/>
                        <div class='error-list' *ngIf="providerformControls.companyName.touched && !providerformControls.companyName.valid">
                            <ul>
                                <li *ngIf="providerformControls.companyName.pending">Checking...</li>
                                <li *ngIf="providerformControls.companyName.hasError('required')">Company Name is required.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <label class="form-label"> Company type
                                            <span class="color-red">*</span>
                                        </label>
                    <div class="form-group" [class.error]="providerformControls.companyType.touched && !providerformControls.companyType.valid">
                        <select disabled [ngModel]=1 formControlName="companyType" class="selectpicker form-control" title="Select Company Type."
                            [class.error]="providerformControls.companyType.touched && !providerformControls.companyType.valid">
                                             <!--<option value="">-Select company type-</option>
                                             <option disabled>────────────────────</option>-->
                                             <option value="1">Medical Provider</option>
                                             <!--<option value="Medical Provider">Medical Provider</option>
                                             <option value="PI\BI Firm">PI\BI Firm</option>
                                             <option value="Collection Firm">Collection Firm</option>
                                             <option value="Transportation">Transportation</option>-->
                                         </select>
                        <div class='error-list' *ngIf="providerformControls.companyType.touched && !providerformControls.companyType.valid">
                            <ul>
                                <li *ngIf="providerformControls.companyType.hasError('required')">Company type is required.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-6">
                    <label class="form-label"> First Name
                                            <span class="color-red">*</span>
                                        </label>
                    <div class="form-group" [class.error]="providerformControls.firstName.touched && !providerformControls.firstName.valid">
                        <input [ngModel]="firstName" formControlName="firstName" type="text" class="form-control" [class.error]="!providerformControls.firstName.valid"
                        />
                        <div class='error-list' *ngIf="providerformControls.firstName.touched && !providerformControls.firstName.valid">
                            <ul>
                                <li *ngIf="providerformControls.firstName.hasError('required')">First name is required.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <label class="form-label"> Last Name
                                            <span class="color-red">*</span>
                                        </label>
                    <div class="form-group" [class.error]="providerformControls.lastName.touched && !providerformControls.lastName.valid">
                        <input [ngModel]="lastName" formControlName="lastName" type="text" class="form-control" [class.error]="!providerformControls.lastName.valid" />
                        <div class='error-list' *ngIf="providerformControls.lastName.touched && !providerformControls.lastName.valid">
                            <ul>
                                <li *ngIf="providerformControls.lastName.hasError('required')">Last name is required.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-6">
                    <label class="form-label"> E-Mail
                                            <span class="color-red">*</span>
                                        </label>
                    <div class="form-group" [class.error]="providerformControls.email.touched && !providerformControls.email.valid">
                        <input [ngModel]="email" formControlName="email" type="email" [class.error]="!providerformControls.email.valid" class="form-control" placeholder=""
                            type="text"  />
                        <div class='error-list' *ngIf="providerformControls.email.touched && !providerformControls.email.valid">
                            <ul>
                                <li *ngIf="providerformControls.email.hasError('required')">Email is required.</li>
                                <li *ngIf="providerformControls.email.hasError('emailValidator')">Email is invalid.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <label class="form-label"> Phone number
                                            <span class="color-red">*</span>
                                        </label>
                    <div class="form-group" [class.error]="providerformControls.phoneNo.touched && !providerformControls.phoneNo.valid">
                        <p-inputMask [ngModel]="phoneNo" mask="+1 999-999-9999" formControlName="phoneNo" [class.error]="providerformControls.phoneNo.touched && !providerformControls.phoneNo.valid"
                            placeholder="+1 999-999-9999" styleClass="form-control"></p-inputMask>
                        <!--<input formControlName="phoneNo" type="text" class="form-control" [class.error]="providerformControls.phoneNo.touched && !providerformControls.phoneNo.valid" />-->
                        <div class='error-list' *ngIf="providerformControls.phoneNo.touched && !providerformControls.phoneNo.valid">
                            <ul>
                                <li *ngIf="providerformControls.phoneNo.hasError('required')">Phone number is required.</li>
                                <li *ngIf="providerformControls.phoneNo.hasError('mobileNoValidator')">Phone number is invalid.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <button *ngIf="!companyExists" [disabled]="!providerform.valid ||  isSaveProgress" type="submit" class="btn btn-success sign-up">Save
                                <loader [visible]="isSaveProgress"></loader>
                            </button>
            <a *ngIf="inputCancel != 1" [routerLink]="['../']" (click)="closeDialog()" class="btn btn-secondary">Cancel</a>
            <a *ngIf="inputCancel == 1" (click)="closeDialog()" class="btn btn-secondary">Cancel</a>
        </form>
    </div>
</section>